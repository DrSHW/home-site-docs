---
description: 组成原理
layout: ../../../layouts/MainLayout.astro
---

## 3.4 外部存储器

### 3.4.1 磁盘存储器

<img src="https://images.drshw.tech/images/notes/image-20230318213444490.png" alt="image-20230318213444490" style="zoom:50%;" />

#### 磁盘存储器的工作原理与特性

计算机的外存储器又称为辅助存储器，目前主要使用磁表面存储器。外存储器既可以作为输入设备，也可以作为输出设备（既可以存数据，也可以读数据）

所谓“磁表面存储”，是指把某些磁性材料薄薄地涂在金属铝或塑料（盘片）表面上作为载磁体来存储信息。磁盘存储器、磁带存储器和磁鼓存储器均属于磁表面存储器。

<img src="https://images.drshw.tech/images/notes/image-20230318211548767.png" alt="image-20230318211548767" style="zoom:50%;" />

> 读写不可同时进行。磁头划过存储体表面时，每次读出1bit信息。

磁表面存储器的优点：

1. 存储容量大，位价格低；
2. 记录介质可以重复使用；
3. 记录信息可以长期保存而不丢失，甚至可以脱机存档；
4. 非破坏性读出，读出时不需要再生。

磁表面存储器的缺点：

1. 存取速度慢；
2. 机械结构复杂；
3. 对工作环境要求较高。

#### 磁盘设备的组成

磁盘设备可由**存储区域**与**硬盘存储器**组成。

硬盘存储器由磁盘驱动器（机械部分）与磁盘控制器（电路部分）和盘片组成。

磁盘驱动器：核心部件是磁头组件和盘片组件，温彻斯特盘是一种可移动头固定盘片的硬盘存储器。

<img src="https://images.drshw.tech/images/notes/image-20230318212407443.png" alt="image-20230318212407443" style="zoom:50%;" />

> 在电路板的控制下，驱动轴使盘片不断旋转，磁头臂通过移动读（写）磁头读取（写入）盘片上的信息。
>
> 微观结构如下：
>
> <img src="https://images.drshw.tech/images/notes/image-20230318213802937.png" alt="image-20230318213802937" style="zoom:50%;" />

磁盘控制器：是硬盘存储器和主机的接口，主流的标准有IDE、SCSI、SATA等。

<img src="https://images.drshw.tech/images/notes/image-20230318212342515.png" alt="image-20230318212342515" style="zoom: 67%;" /><img src="https://images.drshw.tech/images/notes/image-20230318212626686.png" alt="image-20230318212626686" style="zoom: 67%;" />

而存储区域中，一块硬盘含有若干个记录面，每个记录面划分为若干条磁道，而每条磁道又划分为若干个扇区，扇区（也称块）是磁盘读写的最小单位，也就是说磁盘按块存取。

存储区域中的磁头数、柱面数、扇区数：

<img src="https://images.drshw.tech/images/notes/image-20230318214206545.png" alt="image-20230318214206545" style="zoom:50%;" />

#### 磁盘的性能指标

1. 磁盘的容量：一个磁盘所能存储的字节总数称为磁盘容量。磁盘容量有**非格式化容量**和**格式化容量**之分。
   + 非格式化容量是指：磁记录表面可以利用的磁化单元总数。
   + 格式化容量是指：按照某种特定的记录格式所能存储信息的总量。
2. 记录密度：记录密度是指盘片单位面积上记录的二进制的信息量，通常以**道密度**、**位密度**和**面密度**表示。
   + 道密度是沿磁盘半径方向单位长度上的磁道数；
   + 位密度是磁道单位长度上能记录的二制代码位数；
   + **面密度**是位密度和道密度的**乘积**。

<img src="https://images.drshw.tech/images/notes/image-20230318214926865.png" alt="image-20230318214926865" style="zoom:50%;" />

> 注意：磁盘所有磁道记录的信息量一定是相等的，并不是圆越大信息越多，故每个磁道的位密度都不同：
>
> <img src="https://images.drshw.tech/images/notes/image-20230318214938040.png" alt="image-20230318214938040" style="zoom:50%;" />

3. 平均存取时间：

   **平均存取时间** = 寻道时间（磁头移动到目的磁道）+  旋转延迟时间（磁头定位到所在扇区）+ 传输时间（传输数据所花费的时间）。

   <img src="https://images.drshw.tech/images/notes/image-20230318215533034.png" alt="image-20230318215533034" style="zoom:50%;" />

4. 数据传输率：磁盘存储器在单位时间内向主机传送数据的字节数，称为**数据传输率**。

   假设磁盘转数为`r`（转/秒），每条磁道容量为`N`个字节，则数据传输率为<img src="https://images.drshw.tech/images/notes/image-20230318215645657.png" alt="image-20230318215645657" style="zoom:60%;" />。

#### 磁盘的地址结构

主机向磁盘控制器发送寻址信息，磁盘的地址一般如图所示：

<img src="https://images.drshw.tech/images/notes/image-20230318215918666.png" alt="image-20230318215918666" style="zoom:50%;" />

例如，若系统中有4个驱动器，每个驱动器带一个磁盘，每个磁盘256个磁道、16个盘面，每个盘面划分为16个扇区，则每个扇区地址要18位二进制代码：

<img src="https://images.drshw.tech/images/notes/image-20230318220045614.png" alt="image-20230318220045614" style="zoom:50%;" />

#### 硬盘的工作过程

硬盘的主要操作是寻址、读盘、写盘。每个操作都对应一个控制字，硬盘工作时，第一步是取控制字，第二步是执行控制字。

硬盘属于机械式部件，其读写操作是串行的，不可能在同一时刻既读又写，也不可能在同一时刻读两组数据或写两组数据。因此需要设置串并变换电路（可以一次输入多比特数据，但一次只能读/写1bit信息）：

<img src="https://images.drshw.tech/images/notes/image-20230318220336596.png" alt="image-20230318220336596" style="zoom: 67%;" />

#### 磁盘阵列

明天搞
