---
description: Docs intro
layout: ../../../layouts/MainLayout.astro
---

## 1.2 操作系统的特征

操作系统是一种系统软件，但与其他的系统软件和应用软件有很大的不同，他有自己的特殊性即基本特征，操作系统的基本特征包括**并发、共享、虚拟和异步**。这些概念对理解和掌握操作系统的核心至关重要，将一直贯穿于各章节中。

### 1.2.1 并发

#### 并发的概念

**并发**是指两个或多个事件在**同一时间间隔内**发生。这些事件**宏观上是同时发生**的，但**微观上是交替发生**的。

还有一个类似的概念，叫**并行**，它就是指两个或多个事件在**同一时刻**同时发生。

**操作系统的并发性**是指计算机系统中同时存在多个运行着的程序。由于一个单核处理机（CPU）同一时刻只能运行一个程序，因此操作系统会负责**协调多个程序交替执行**。

当今的计算机，一般都是多核CPU，比如Intel的第八代 i3 处理器就是**4核**CPU。这意味着同一时刻可以有4个程序并行执行，但是操作系统的**并发性依然必不可少**，当代人使用计算机绝对有4个以上的程序需要同时工作。

#### 顺序执行和并发执行

顺序执行时，程序具有以下特性：

1. **顺序性**：严格的按照顺序执行；
1. **封闭性**：程序运行时独占全机资源，只有本程序才能改变它的资源状态，程序一旦开始执行，不受外界影响；
1. **可再现性**：无论如何执行，都可缺获得相同的结果。

并发执行时，程序具有以下特性：

1. **间断性**：由于资源有限，并发执行的程序存在相互制约的关系；
2. **失去封闭性**：并发执行的程序共享计算机资源，这些资源的状态由这些程序改变；
3. **不可再现性**：并发执行的程序执行的顺序不同可能有不同的执行结果，

#### Bernstein条件

并发执行的程序需要满足一定的条件，我们称该条件为**Bernstein条件**：

Berstein条件的解释：

若两个程序`P1`、`P2`满足如下条件（下面的`R(read)`表示读出的内容集合、`W(write)`表示写入的内容集合）：

`R(P1)` ∩ `W(P2)` ∪ `R(P2)` ∩ `W(P1)` ∪ `W(P1)` ∩ `W(P2)` = Ø

那么他们便能并发执行，且**具有可再现性**。

这么说有些抽象，我们来举个例子：

下面有五条语句，可对应五条程序：

```python
S1: a = 5 − x
S2: b = a ∗ x
S3: c = 4 ∗ x
S4: d = b + c
S5: e = d + 3
```

说明`S2`和`S3`是可以并发执行的，而`S3`和`S4`是不能并发执行的。

对于该题，可先写出`R(Si)`和：

+ `R(Si)`为读出的内容集合，即等号后的符号集；
+ `W(Si)`为写入的内容集合，即等号前的符号集；

于是：

```cpp
R(S1) = {x}		W(S1) = {a};
R(S2) = {b}		W(S2) = {a, x};
R(S3) = {c}		W(S3) = {x};
R(S4) = {d}		W(S4) = {b, c};
R(S5) = {e}		W(S5) = {d};
```

对于`S2`和`S3`：

`R(S2)` ∩ `W(S3)` ∪ `R(S3)` ∩ `W(S2)` ∪ `W(S2)` ∩ `W(S3)` = `{b}` ∩ `{x}` ∪ `{c}` ∩ `{a, x}` ∪ `{a, x}` ∩ `{x}` =  Ø

即代表`S2`和`S3`可并发执行。

对于`S3`和`S4`：

`R(S3)` ∩ `W(S4)` ∪ `R(S4)` ∩ `W(S3)` ∪ `W(S3)` ∩ `W(S4)` = `{c}` ∩ `{b, c}` ∪ `{d}` ∩ `{x}` ∪ `{x}` ∩ `{b, c}` = `{c}` ≠ Ø

即代表`S2`和`S3`不可并发执行。

### 1.2.2 共享

共享即资源共享，是指系统中的资源可供内存中多个并发执行的进程共同使用。

资源共享可以分为**互斥共享方式**和**同时共享方式**：

+ 互斥共享方式：

  系统中的某些资源，虽然他们可以提供给多个进程使用，但**同一段时间内只允许一个进程方位该资源**。

  举个例子，使用QQ和微信视频，同一时间段内摄像头只能分配给其中一个进程。

+ 同时共享方式：

  系统中的某些资源，**允许在一段时间内由多个进程“同时”对它进行访问**。这里所谓的“同时”往往是宏观上的，而在微观上，这些进程可能是交替地对该资源进行访问的（即分时共享）。

  举个例子，使用QQ发送文件给A，同时使用微信发送文件给B。宏观来看，两边都在同时读取并发送文件，说明两个进程都在访问硬盘资源，从中读取数据。微观上看，两个进程是交替访问硬盘的。

并发和共享是操作系统两个最基本的特征，这两者之间又是互为存在条件的：

1. 资源共享是以程序的并发为条件的，若系统不允许程序并发执行，则自然不存在资源共享的问题；
2. 若系统不能对资源共享实施有效地管理，也必将影响到程序的并发执行，甚至根本无法并发执行。

### 1.2.3 虚拟

**虚拟**是指把一个物理上的实体变为若干个逻辑上的对应物。物理实体（前者）是实际存在的；而逻辑上对应物（后者）是用户感受到的事物。

这个概念有些抽象，下面有两个应用实例：

![image-20221005134614846](https://images.drshw.tech/images/notes/image-20221005134614846.png)

在这个例子中，用到了虚拟存储器技术，它能够将一台机器的物理存储器变为虚拟存储器，从逻辑上来扩充存储器的容量。当然， 这里用户所感觉到的内存容量是虚的，我们把用户所感觉到的存储器称为**虚拟存储器**。

![image-20221005134801821](https://images.drshw.tech/images/notes/image-20221005134801821.png)

在这个例子中，虽然只有一台处理器，但他能同时为多个用户服务，每个终端用户都认为是有一个中央处理器在为他服务。利用多道程序设计技术，把一台物理上的CPU虚拟为多台逻辑上的CPU，称为**虚拟处理器**。

因此操作系统的虚拟技术可归纳为：**空分复用技术**和**时分复用技术**，在第三章会详细讲。

显然，如果失去了并发性，则一个时间段内系统只需运行一道程序，那么就失去了虚拟性的意义了。因此，**没有并发性，就谈不上虚拟性**。

### 1.2.4 异步

在多道程序环境下，允许多个程序并发执行，但由于资源有限，进程的执行不是一贯到底，而是走走停停，以不可预知的速度向前推进，这就是进程的**异步性**。

异步性使得操作系统运行在一种**随机**的环境下，可能导致进程产生于时间有关的错误。但是只要运行环境相同，操作系统必须保证多次运行进程，都获得相同的结果。

显然，如果失去了并发性，则系统只能串行地处理各个进程，每个进程执行会一贯到底。**只有系统拥有并发性，才有可能导致异步性**。